{% extends 'base.html.twig' %}

{% block title %}Isaac's Bravery - Accueil
{% endblock %}

{% block body %}
	<h1 class="p-4 text-4xl text-center text-white">Builds</h1>

	{% if builds is empty %}
		<p class="text-center text-white">You have no setup builds yet.</p>
	{% endif %}

	{% for build in builds %}

		{# Découper les items en deux colonnes #}
		{% set firstBuildColumn = build.item|slice(0, 5) %}
		{% set secondBuildColumn = build.item|slice(5, 5) %}

		<div class="w-full max-w-7xl mx-auto my-4 bg-gray-800 p-6 rounded-lg shadow-lg">
			<div
				class="grid grid-cols-2 gap-4">
				{# Colonne de gauche : Items (2 colonnes de 5) #}
				<div class="flex flex-col gap-4">
					<div class="grid grid-cols-1 gap-4">
						{% for item in firstBuildColumn %}
							<div class="bg-gray-600 p-4 flex flex-col justify-center items-center rounded-lg shadow-md">
								<img src="{{ asset('images/items/' ~ item.filename ?: '') }}" alt="{{ item.name }}" class="w-12 h-12 object-cover mt-2">
								<p class="text-white mt-2 text-sm">{{ item.name }}</p>
							</div>
						{% endfor %}
					</div>
					<div class="grid grid-cols-1 gap-4">
						{% for item in secondBuildColumn %}
							<div class="bg-gray-600 p-4 flex flex-col justify-center items-center rounded-lg shadow-md">
								<img src="{{ asset('images/items/' ~ item.filename ?: '') }}" alt="{{ item.name }}" class="w-12 h-12 object-cover mt-2">
								<p class="text-white mt-2 text-sm">{{ item.name }}</p>
							</div>
						{% endfor %}
					</div>
				</div>

				{# Colonne droite : Personnage et Boss #}
				<div
					class="flex flex-col gap-4">
					{# Personnage en haut à droite #}
					<div class="bg-gray-700 p-6 rounded-lg shadow-lg flex flex-col justify-center items-center">
						{% for character in build.character %}
							<p class="text-white text-xl">{{ character.name }}</p>
							<img src="{{ asset('images/characters/' ~ character.filename ?: '') }}" alt="{{ character.name }}" class="w-32 h-32 object-cover mt-4 rounded-full">
						{% endfor %}
					</div>

					{# Boss en bas à droite #}
					<div class="bg-gray-700 p-6 rounded-lg shadow-lg flex flex-col justify-center items-center">
						{% for boss in build.boss %}
							<p class="text-white text-xl">{{ boss.name }}</p>
							<img src="{{ asset('images/destinations/' ~ boss.filename ?: '') }}" alt="{{ boss.name }}" class="w-32 h-32 object-cover mt-4 rounded-full">
						{% endfor %}
					</div>
				</div>
			</div>
			<form method="post" action="{{ path('app_build_user_delete', {'id': build.id}) }}" onsubmit="return confirm('Are you sure you want to delete this Build?');">
				<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ build.id) }}">
				<button class="bg-red-500 p-4 rounded-lg shadow-lg text-white">Delete</button>
			</form>
		</div>
	{% endfor %}

{% endblock %}
